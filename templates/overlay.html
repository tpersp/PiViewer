<!DOCTYPE html>
<html>
<head>
  <title>Overlay Settings</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="{{ theme }}">
<div class="container">
  <h1>Overlay Settings</h1>

  <form method="POST">
    <input type="hidden" name="action" value="save_overlay">

    <!-- Weather checkbox -->
    <label>
      <input type="checkbox" name="weather_enabled" {% if overlay.weather_enabled %}checked{% endif %}>
      Enable Weather
    </label>
    <br><br>

    <!-- OWM API Key -->
    <label>OpenWeatherMap API Key:</label><br>
    <input type="text" name="api_key" value="{{ overlay.api_key|default('') }}" style="width:300px;">
    <br><br>

    <!-- Zip / Country for auto-lookup -->
    <label>Zip Code:</label><br>
    <input type="text" name="zip_code" value="{{ overlay.zip_code|default('') }}">
    <br><br>

    <label>Country Code (2-letter, e.g. US):</label><br>
    <input type="text" name="country_code" value="{{ overlay.country_code|default('') }}">
    <br><br>

    <!-- Coordinates (if known) -->
    <label>Latitude:</label><br>
    <input type="text" name="lat" value="{{ overlay.lat|default('') }}">
    <br><br>

    <label>Longitude:</label><br>
    <input type="text" name="lon" value="{{ overlay.lon|default('') }}">
    <br><br>

    <!-- User controls for color and opacity -->
    <label>Overlay BG Color (#RRGGBB):</label><br>
    <input type="text" name="bg_color" value="{{ overlay.bg_color|default('#000000') }}">
    <br><br>

    <label>Overlay BG Opacity (0.0 - 1.0):</label><br>
    <input type="text" name="bg_opacity" value="{{ overlay.bg_opacity|default(0.4) }}">
    <br><br>

    <!-- X/Y offsets -->
    <label>X Offset:</label><br>
    <input type="text" name="offset_x" value="{{ overlay.offset_x|default('20') }}">
    <br><br>

    <label>Y Offset:</label><br>
    <input type="text" name="offset_y" value="{{ overlay.offset_y|default('20') }}">
    <br><br>

    <button type="submit">Save Overlay Settings</button>
  </form>

  <br><hr><br>

  <!-- Button to auto-lookup lat/lon from zip/country using the provided API key -->
  <form method="POST">
    <input type="hidden" name="action" value="lookup_latlon">
    <p><strong>Auto-Lookup Lat/Lon from Zip Code:</strong></p>
    <p>Enter your API key, zip code, and country code above, then press "Lookup".</p>
    <button type="submit">Lookup Lat/Lon</button>
  </form>

  <br><br>
  <a href="{{ url_for('main.index') }}">
    <button>Back to Main</button>
  </a>
</div>
</body>
</html>
